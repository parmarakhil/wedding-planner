{"file":"/Users/akhilsingh/Desktop/Projects/wedding/src/main/webapp/app/account/register/register.component.spec.ts","mappings":"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","names":[],"sources":["/Users/akhilsingh/Desktop/Projects/wedding/src/main/webapp/app/account/register/register.component.spec.ts"],"sourcesContent":["import { ComponentFixture, TestBed, waitForAsync, inject, tick, fakeAsync } from '@angular/core/testing';\nimport { HttpClientTestingModule } from '@angular/common/http/testing';\nimport { FormBuilder } from '@angular/forms';\nimport { of, throwError } from 'rxjs';\n\nimport { EMAIL_ALREADY_USED_TYPE, LOGIN_ALREADY_USED_TYPE } from 'app/config/error.constants';\n\nimport { RegisterService } from './register.service';\nimport { RegisterComponent } from './register.component';\n\ndescribe('Component Tests', () => {\n  describe('RegisterComponent', () => {\n    let fixture: ComponentFixture<RegisterComponent>;\n    let comp: RegisterComponent;\n\n    beforeEach(\n      waitForAsync(() => {\n        TestBed.configureTestingModule({\n          imports: [HttpClientTestingModule],\n          declarations: [RegisterComponent],\n          providers: [FormBuilder],\n        })\n          .overrideTemplate(RegisterComponent, '')\n          .compileComponents();\n      })\n    );\n\n    beforeEach(() => {\n      fixture = TestBed.createComponent(RegisterComponent);\n      comp = fixture.componentInstance;\n    });\n\n    it('should ensure the two passwords entered match', () => {\n      comp.registerForm.patchValue({\n        password: 'password',\n        confirmPassword: 'non-matching',\n      });\n\n      comp.register();\n\n      expect(comp.doNotMatch).toBe(true);\n    });\n\n    it('should update success to true after creating an account', inject(\n      [RegisterService],\n      fakeAsync((service: RegisterService) => {\n        jest.spyOn(service, 'save').mockReturnValue(of({}));\n        comp.registerForm.patchValue({\n          password: 'password',\n          confirmPassword: 'password',\n        });\n\n        comp.register();\n        tick();\n\n        expect(service.save).toHaveBeenCalledWith({\n          email: '',\n          password: 'password',\n          login: '',\n          langKey: 'en',\n        });\n        expect(comp.success).toBe(true);\n        expect(comp.errorUserExists).toBe(false);\n        expect(comp.errorEmailExists).toBe(false);\n        expect(comp.error).toBe(false);\n      })\n    ));\n\n    it('should notify of user existence upon 400/login already in use', inject(\n      [RegisterService],\n      fakeAsync((service: RegisterService) => {\n        jest.spyOn(service, 'save').mockReturnValue(\n          throwError({\n            status: 400,\n            error: { type: LOGIN_ALREADY_USED_TYPE },\n          })\n        );\n        comp.registerForm.patchValue({\n          password: 'password',\n          confirmPassword: 'password',\n        });\n\n        comp.register();\n        tick();\n\n        expect(comp.errorUserExists).toBe(true);\n        expect(comp.errorEmailExists).toBe(false);\n        expect(comp.error).toBe(false);\n      })\n    ));\n\n    it('should notify of email existence upon 400/email address already in use', inject(\n      [RegisterService],\n      fakeAsync((service: RegisterService) => {\n        jest.spyOn(service, 'save').mockReturnValue(\n          throwError({\n            status: 400,\n            error: { type: EMAIL_ALREADY_USED_TYPE },\n          })\n        );\n        comp.registerForm.patchValue({\n          password: 'password',\n          confirmPassword: 'password',\n        });\n\n        comp.register();\n        tick();\n\n        expect(comp.errorEmailExists).toBe(true);\n        expect(comp.errorUserExists).toBe(false);\n        expect(comp.error).toBe(false);\n      })\n    ));\n\n    it('should notify of generic error', inject(\n      [RegisterService],\n      fakeAsync((service: RegisterService) => {\n        jest.spyOn(service, 'save').mockReturnValue(\n          throwError({\n            status: 503,\n          })\n        );\n        comp.registerForm.patchValue({\n          password: 'password',\n          confirmPassword: 'password',\n        });\n\n        comp.register();\n        tick();\n\n        expect(comp.errorUserExists).toBe(false);\n        expect(comp.errorEmailExists).toBe(false);\n        expect(comp.error).toBe(true);\n      })\n    ));\n  });\n});\n"],"version":3}