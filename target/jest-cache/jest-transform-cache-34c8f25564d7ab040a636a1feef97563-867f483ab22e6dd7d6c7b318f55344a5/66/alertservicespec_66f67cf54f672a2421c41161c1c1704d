15b29586d38f7120f138c5b3a290cf83
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@angular/core/testing");
const alert_service_1 = require("./alert.service");
describe('Alert service test', () => {
    describe('Alert Service Test', () => {
        let extAlerts;
        beforeEach(() => {
            testing_1.TestBed.configureTestingModule({});
            jest.useFakeTimers();
            extAlerts = [];
        });
        it('should produce a proper alert object and fetch it', testing_1.inject([alert_service_1.AlertService], (service) => {
            expect(service.addAlert({
                type: 'success',
                message: 'Hello Jhipster',
                timeout: 3000,
                toast: true,
                position: 'top left',
            })).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster',
                id: 0,
                timeout: 3000,
                toast: true,
                position: 'top left',
            }));
            expect(service.get().length).toBe(1);
            expect(service.get()[0]).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster',
                id: 0,
                timeout: 3000,
                toast: true,
                position: 'top left',
            }));
        }));
        it('should produce a proper alert object and add it to external alert objects array', testing_1.inject([alert_service_1.AlertService], (service) => {
            expect(service.addAlert({
                type: 'success',
                message: 'Hello Jhipster',
                timeout: 3000,
                toast: true,
                position: 'top left',
            }, extAlerts)).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster',
                id: 0,
                timeout: 3000,
                toast: true,
                position: 'top left',
            }));
            expect(extAlerts.length).toBe(1);
            expect(extAlerts[0]).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster',
                id: 0,
                timeout: 3000,
                toast: true,
                position: 'top left',
            }));
        }));
        it('should produce an alert object with correct id', testing_1.inject([alert_service_1.AlertService], (service) => {
            service.addAlert({ type: 'info', message: 'Hello Jhipster info' });
            expect(service.addAlert({ type: 'success', message: 'Hello Jhipster success' })).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster success',
                id: 1,
            }));
            expect(service.get().length).toBe(2);
            expect(service.get()[1]).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster success',
                id: 1,
            }));
        }));
        it('should close an alert correctly', testing_1.inject([alert_service_1.AlertService], (service) => {
            var _a, _b, _c;
            const alert0 = service.addAlert({ type: 'info', message: 'Hello Jhipster info' });
            const alert1 = service.addAlert({ type: 'info', message: 'Hello Jhipster info 2' });
            const alert2 = service.addAlert({ type: 'success', message: 'Hello Jhipster success' });
            expect(alert2).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster success',
                id: 2,
            }));
            expect(service.get().length).toBe(3);
            (_a = alert1.close) === null || _a === void 0 ? void 0 : _a.call(alert1, service.get());
            expect(service.get().length).toBe(2);
            expect(service.get()[1]).not.toEqual(expect.objectContaining({
                type: 'info',
                message: 'Hello Jhipster info 2',
                id: 1,
            }));
            (_b = alert2.close) === null || _b === void 0 ? void 0 : _b.call(alert2, service.get());
            expect(service.get().length).toBe(1);
            expect(service.get()[0]).not.toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster success',
                id: 2,
            }));
            (_c = alert0.close) === null || _c === void 0 ? void 0 : _c.call(alert0, service.get());
            expect(service.get().length).toBe(0);
        }));
        it('should close an alert on timeout correctly', testing_1.inject([alert_service_1.AlertService], (service) => {
            service.addAlert({ type: 'info', message: 'Hello Jhipster info' });
            expect(service.get().length).toBe(1);
            jest.advanceTimersByTime(6000);
            expect(service.get().length).toBe(0);
        }));
        it('should clear alerts', testing_1.inject([alert_service_1.AlertService], (service) => {
            service.addAlert({ type: 'info', message: 'Hello Jhipster info' });
            service.addAlert({ type: 'danger', message: 'Hello Jhipster info' });
            service.addAlert({ type: 'success', message: 'Hello Jhipster info' });
            expect(service.get().length).toBe(3);
            service.clear();
            expect(service.get().length).toBe(0);
        }));
        it('should produce a scoped alert', testing_1.inject([alert_service_1.AlertService], (service) => {
            expect(service.addAlert({
                type: 'success',
                message: 'Hello Jhipster',
                timeout: 3000,
                toast: true,
                position: 'top left',
            }, [])).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster',
                id: 0,
                timeout: 3000,
                toast: true,
                position: 'top left',
            }));
            expect(service.get().length).toBe(0);
        }));
        it('should produce a success message', testing_1.inject([alert_service_1.AlertService], (service) => {
            expect(service.addAlert({ type: 'success', message: 'Hello Jhipster' })).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster',
            }));
        }));
        it('should produce a success message with custom position', testing_1.inject([alert_service_1.AlertService], (service) => {
            expect(service.addAlert({ type: 'success', message: 'Hello Jhipster', position: 'bottom left' })).toEqual(expect.objectContaining({
                type: 'success',
                message: 'Hello Jhipster',
                position: 'bottom left',
            }));
        }));
        it('should produce a error message', testing_1.inject([alert_service_1.AlertService], (service) => {
            expect(service.addAlert({ type: 'danger', message: 'Hello Jhipster' })).toEqual(expect.objectContaining({
                type: 'danger',
                message: 'Hello Jhipster',
            }));
        }));
        it('should produce a warning message', testing_1.inject([alert_service_1.AlertService], (service) => {
            expect(service.addAlert({ type: 'warning', message: 'Hello Jhipster' })).toEqual(expect.objectContaining({
                type: 'warning',
                message: 'Hello Jhipster',
            }));
        }));
        it('should produce a info message', testing_1.inject([alert_service_1.AlertService], (service) => {
            expect(service.addAlert({ type: 'info', message: 'Hello Jhipster' })).toEqual(expect.objectContaining({
                type: 'info',
                message: 'Hello Jhipster',
            }));
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2FraGlsc2luZ2gvRGVza3RvcC9Qcm9qZWN0cy93ZWRkaW5nL3NyYy9tYWluL3dlYmFwcC9hcHAvY29yZS91dGlsL2FsZXJ0LnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLG1EQUF3RDtBQUV4RCxtREFBc0Q7QUFFdEQsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxRQUFRLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO1FBQ2xDLElBQUksU0FBa0IsQ0FBQztRQUV2QixVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ2QsaUJBQU8sQ0FBQyxzQkFBc0IsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNuQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7WUFDckIsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNqQixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxtREFBbUQsRUFBRSxnQkFBTSxDQUFDLENBQUMsNEJBQVksQ0FBQyxFQUFFLENBQUMsT0FBcUIsRUFBRSxFQUFFO1lBQ3ZHLE1BQU0sQ0FDSixPQUFPLENBQUMsUUFBUSxDQUFDO2dCQUNmLElBQUksRUFBRSxTQUFTO2dCQUNmLE9BQU8sRUFBRSxnQkFBZ0I7Z0JBQ3pCLE9BQU8sRUFBRSxJQUFJO2dCQUNiLEtBQUssRUFBRSxJQUFJO2dCQUNYLFFBQVEsRUFBRSxVQUFVO2FBQ3JCLENBQUMsQ0FDSCxDQUFDLE9BQU8sQ0FDUCxNQUFNLENBQUMsZ0JBQWdCLENBQUM7Z0JBQ3RCLElBQUksRUFBRSxTQUFTO2dCQUNmLE9BQU8sRUFBRSxnQkFBZ0I7Z0JBQ3pCLEVBQUUsRUFBRSxDQUFDO2dCQUNMLE9BQU8sRUFBRSxJQUFJO2dCQUNiLEtBQUssRUFBRSxJQUFJO2dCQUNYLFFBQVEsRUFBRSxVQUFVO2FBQ1osQ0FBQyxDQUNaLENBQUM7WUFFRixNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNy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bmcvc3JjL21haW4vd2ViYXBwL2FwcC9jb3JlL3V0aWwvYWxlcnQuc2VydmljZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluamVjdCwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7XG5cbmltcG9ydCB7IEFsZXJ0LCBBbGVydFNlcnZpY2UgfSBmcm9tICcuL2FsZXJ0LnNlcnZpY2UnO1xuXG5kZXNjcmliZSgnQWxlcnQgc2VydmljZSB0ZXN0JywgKCkgPT4ge1xuICBkZXNjcmliZSgnQWxlcnQgU2VydmljZSBUZXN0JywgKCkgPT4ge1xuICAgIGxldCBleHRBbGVydHM6IEFsZXJ0W107XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIFRlc3RCZWQuY29uZmlndXJlVGVzdGluZ01vZHVsZSh7fSk7XG4gICAgICBqZXN0LnVzZUZha2VUaW1lcnMoKTtcbiAgICAgIGV4dEFsZXJ0cyA9IFtdO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm9kdWNlIGEgcHJvcGVyIGFsZXJ0IG9iamVjdCBhbmQgZmV0Y2ggaXQnLCBpbmplY3QoW0FsZXJ0U2VydmljZV0sIChzZXJ2aWNlOiBBbGVydFNlcnZpY2UpID0+IHtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgc2VydmljZS5hZGRBbGVydCh7XG4gICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicsXG4gICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICB0b2FzdDogdHJ1ZSxcbiAgICAgICAgICBwb3NpdGlvbjogJ3RvcCBsZWZ0JyxcbiAgICAgICAgfSlcbiAgICAgICkudG9FcXVhbChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXInLFxuICAgICAgICAgIGlkOiAwLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgdG9hc3Q6IHRydWUsXG4gICAgICAgICAgcG9zaXRpb246ICd0b3AgbGVmdCcsXG4gICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKS5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKVswXSkudG9FcXVhbChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXInLFxuICAgICAgICAgIGlkOiAwLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgdG9hc3Q6IHRydWUsXG4gICAgICAgICAgcG9zaXRpb246ICd0b3AgbGVmdCcsXG4gICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICApO1xuICAgIH0pKTtcblxuICAgIGl0KCdzaG91bGQgcHJvZHVjZSBhIHByb3BlciBhbGVydCBvYmplY3QgYW5kIGFkZCBpdCB0byBleHRlcm5hbCBhbGVydCBvYmplY3RzIGFycmF5JywgaW5qZWN0KFxuICAgICAgW0FsZXJ0U2VydmljZV0sXG4gICAgICAoc2VydmljZTogQWxlcnRTZXJ2aWNlKSA9PiB7XG4gICAgICAgIGV4cGVjdChcbiAgICAgICAgICBzZXJ2aWNlLmFkZEFsZXJ0KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicsXG4gICAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICAgIHRvYXN0OiB0cnVlLFxuICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCBsZWZ0JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBleHRBbGVydHNcbiAgICAgICAgICApXG4gICAgICAgICkudG9FcXVhbChcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXInLFxuICAgICAgICAgICAgaWQ6IDAsXG4gICAgICAgICAgICB0aW1lb3V0OiAzMDAwLFxuICAgICAgICAgICAgdG9hc3Q6IHRydWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCBsZWZ0JyxcbiAgICAgICAgICB9IGFzIEFsZXJ0KVxuICAgICAgICApO1xuXG4gICAgICAgIGV4cGVjdChleHRBbGVydHMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgICBleHBlY3QoZXh0QWxlcnRzWzBdKS50b0VxdWFsKFxuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicsXG4gICAgICAgICAgICBpZDogMCxcbiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICB0b2FzdDogdHJ1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wIGxlZnQnLFxuICAgICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgKSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb2R1Y2UgYW4gYWxlcnQgb2JqZWN0IHdpdGggY29ycmVjdCBpZCcsIGluamVjdChbQWxlcnRTZXJ2aWNlXSwgKHNlcnZpY2U6IEFsZXJ0U2VydmljZSkgPT4ge1xuICAgICAgc2VydmljZS5hZGRBbGVydCh7IHR5cGU6ICdpbmZvJywgbWVzc2FnZTogJ0hlbGxvIEpoaXBzdGVyIGluZm8nIH0pO1xuICAgICAgZXhwZWN0KHNlcnZpY2UuYWRkQWxlcnQoeyB0eXBlOiAnc3VjY2VzcycsIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlciBzdWNjZXNzJyB9KSkudG9FcXVhbChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXIgc3VjY2VzcycsXG4gICAgICAgICAgaWQ6IDEsXG4gICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKS5sZW5ndGgpLnRvQmUoMik7XG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKVsxXSkudG9FcXVhbChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXIgc3VjY2VzcycsXG4gICAgICAgICAgaWQ6IDEsXG4gICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICApO1xuICAgIH0pKTtcblxuICAgIGl0KCdzaG91bGQgY2xvc2UgYW4gYWxlcnQgY29ycmVjdGx5JywgaW5qZWN0KFtBbGVydFNlcnZpY2VdLCAoc2VydmljZTogQWxlcnRTZXJ2aWNlKSA9PiB7XG4gICAgICBjb25zdCBhbGVydDAgPSBzZXJ2aWNlLmFkZEFsZXJ0KHsgdHlwZTogJ2luZm8nLCBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXIgaW5mbycgfSk7XG4gICAgICBjb25zdCBhbGVydDEgPSBzZXJ2aWNlLmFkZEFsZXJ0KHsgdHlwZTogJ2luZm8nLCBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXIgaW5mbyAyJyB9KTtcbiAgICAgIGNvbnN0IGFsZXJ0MiA9IHNlcnZpY2UuYWRkQWxlcnQoeyB0eXBlOiAnc3VjY2VzcycsIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlciBzdWNjZXNzJyB9KTtcbiAgICAgIGV4cGVjdChhbGVydDIpLnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgbWVzc2FnZTogJ0hlbGxvIEpoaXBzdGVyIHN1Y2Nlc3MnLFxuICAgICAgICAgIGlkOiAyLFxuICAgICAgICB9IGFzIEFsZXJ0KVxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNlcnZpY2UuZ2V0KCkubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgYWxlcnQxLmNsb3NlPy4oc2VydmljZS5nZXQoKSk7XG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKS5sZW5ndGgpLnRvQmUoMik7XG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKVsxXSkubm90LnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0eXBlOiAnaW5mbycsXG4gICAgICAgICAgbWVzc2FnZTogJ0hlbGxvIEpoaXBzdGVyIGluZm8gMicsXG4gICAgICAgICAgaWQ6IDEsXG4gICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICApO1xuICAgICAgYWxlcnQyLmNsb3NlPy4oc2VydmljZS5nZXQoKSk7XG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKS5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKVswXSkubm90LnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgbWVzc2FnZTogJ0hlbGxvIEpoaXBzdGVyIHN1Y2Nlc3MnLFxuICAgICAgICAgIGlkOiAyLFxuICAgICAgICB9IGFzIEFsZXJ0KVxuICAgICAgKTtcbiAgICAgIGFsZXJ0MC5jbG9zZT8uKHNlcnZpY2UuZ2V0KCkpO1xuICAgICAgZXhwZWN0KHNlcnZpY2UuZ2V0KCkubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pKTtcblxuICAgIGl0KCdzaG91bGQgY2xvc2UgYW4gYWxlcnQgb24gdGltZW91dCBjb3JyZWN0bHknLCBpbmplY3QoW0FsZXJ0U2VydmljZV0sIChzZXJ2aWNlOiBBbGVydFNlcnZpY2UpID0+IHtcbiAgICAgIHNlcnZpY2UuYWRkQWxlcnQoeyB0eXBlOiAnaW5mbycsIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlciBpbmZvJyB9KTtcblxuICAgICAgZXhwZWN0KHNlcnZpY2UuZ2V0KCkubGVuZ3RoKS50b0JlKDEpO1xuXG4gICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoNjAwMCk7XG5cbiAgICAgIGV4cGVjdChzZXJ2aWNlLmdldCgpLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KSk7XG5cbiAgICBpdCgnc2hvdWxkIGNsZWFyIGFsZXJ0cycsIGluamVjdChbQWxlcnRTZXJ2aWNlXSwgKHNlcnZpY2U6IEFsZXJ0U2VydmljZSkgPT4ge1xuICAgICAgc2VydmljZS5hZGRBbGVydCh7IHR5cGU6ICdpbmZvJywgbWVzc2FnZTogJ0hlbGxvIEpoaXBzdGVyIGluZm8nIH0pO1xuICAgICAgc2VydmljZS5hZGRBbGVydCh7IHR5cGU6ICdkYW5nZXInLCBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXIgaW5mbycgfSk7XG4gICAgICBzZXJ2aWNlLmFkZEFsZXJ0KHsgdHlwZTogJ3N1Y2Nlc3MnLCBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXIgaW5mbycgfSk7XG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKS5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICBzZXJ2aWNlLmNsZWFyKCk7XG4gICAgICBleHBlY3Qoc2VydmljZS5nZXQoKS5sZW5ndGgpLnRvQmUoMCk7XG4gICAgfSkpO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm9kdWNlIGEgc2NvcGVkIGFsZXJ0JywgaW5qZWN0KFtBbGVydFNlcnZpY2VdLCAoc2VydmljZTogQWxlcnRTZXJ2aWNlKSA9PiB7XG4gICAgICBleHBlY3QoXG4gICAgICAgIHNlcnZpY2UuYWRkQWxlcnQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0hlbGxvIEpoaXBzdGVyJyxcbiAgICAgICAgICAgIHRpbWVvdXQ6IDMwMDAsXG4gICAgICAgICAgICB0b2FzdDogdHJ1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wIGxlZnQnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgW11cbiAgICAgICAgKVxuICAgICAgKS50b0VxdWFsKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicsXG4gICAgICAgICAgaWQ6IDAsXG4gICAgICAgICAgdGltZW91dDogMzAwMCxcbiAgICAgICAgICB0b2FzdDogdHJ1ZSxcbiAgICAgICAgICBwb3NpdGlvbjogJ3RvcCBsZWZ0JyxcbiAgICAgICAgfSBhcyBBbGVydClcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzZXJ2aWNlLmdldCgpLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb2R1Y2UgYSBzdWNjZXNzIG1lc3NhZ2UnLCBpbmplY3QoW0FsZXJ0U2VydmljZV0sIChzZXJ2aWNlOiBBbGVydFNlcnZpY2UpID0+IHtcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmFkZEFsZXJ0KHsgdHlwZTogJ3N1Y2Nlc3MnLCBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXInIH0pKS50b0VxdWFsKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicsXG4gICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICApO1xuICAgIH0pKTtcblxuICAgIGl0KCdzaG91bGQgcHJvZHVjZSBhIHN1Y2Nlc3MgbWVzc2FnZSB3aXRoIGN1c3RvbSBwb3NpdGlvbicsIGluamVjdChbQWxlcnRTZXJ2aWNlXSwgKHNlcnZpY2U6IEFsZXJ0U2VydmljZSkgPT4ge1xuICAgICAgZXhwZWN0KHNlcnZpY2UuYWRkQWxlcnQoeyB0eXBlOiAnc3VjY2VzcycsIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicsIHBvc2l0aW9uOiAnYm90dG9tIGxlZnQnIH0pKS50b0VxdWFsKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicsXG4gICAgICAgICAgcG9zaXRpb246ICdib3R0b20gbGVmdCcsXG4gICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICApO1xuICAgIH0pKTtcblxuICAgIGl0KCdzaG91bGQgcHJvZHVjZSBhIGVycm9yIG1lc3NhZ2UnLCBpbmplY3QoW0FsZXJ0U2VydmljZV0sIChzZXJ2aWNlOiBBbGVydFNlcnZpY2UpID0+IHtcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmFkZEFsZXJ0KHsgdHlwZTogJ2RhbmdlcicsIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicgfSkpLnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0eXBlOiAnZGFuZ2VyJyxcbiAgICAgICAgICBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXInLFxuICAgICAgICB9IGFzIEFsZXJ0KVxuICAgICAgKTtcbiAgICB9KSk7XG5cbiAgICBpdCgnc2hvdWxkIHByb2R1Y2UgYSB3YXJuaW5nIG1lc3NhZ2UnLCBpbmplY3QoW0FsZXJ0U2VydmljZV0sIChzZXJ2aWNlOiBBbGVydFNlcnZpY2UpID0+IHtcbiAgICAgIGV4cGVjdChzZXJ2aWNlLmFkZEFsZXJ0KHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiAnSGVsbG8gSmhpcHN0ZXInIH0pKS50b0VxdWFsKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicsXG4gICAgICAgIH0gYXMgQWxlcnQpXG4gICAgICApO1xuICAgIH0pKTtcblxuICAgIGl0KCdzaG91bGQgcHJvZHVjZSBhIGluZm8gbWVzc2FnZScsIGluamVjdChbQWxlcnRTZXJ2aWNlXSwgKHNlcnZpY2U6IEFsZXJ0U2VydmljZSkgPT4ge1xuICAgICAgZXhwZWN0KHNlcnZpY2UuYWRkQWxlcnQoeyB0eXBlOiAnaW5mbycsIG1lc3NhZ2U6ICdIZWxsbyBKaGlwc3RlcicgfSkpLnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0eXBlOiAnaW5mbycsXG4gICAgICAgICAgbWVzc2FnZTogJ0hlbGxvIEpoaXBzdGVyJyxcbiAgICAgICAgfSBhcyBBbGVydClcbiAgICAgICk7XG4gICAgfSkpO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9